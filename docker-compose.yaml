services:
  backend:
    build: ./backend
    init: true
    ports:
      - ${BACKEND_PORT}:9000
    env_file:
      - .env
    environment:
      - PORT=${BACKEND_PORT}
      - APPID=${OPENWEATHER_API_KEY}
      - MAP_ENDPOINT=${OPENWEATHER_MAP_ENDPOINT}
      - TARGET_CITY=${OPENWEATHER_TARGET_CITY}
    volumes:
      - ./backend:/app

  nginx:
    build:
      context: ./
      dockerfile: ./frontend/docker/prod/Dockerfile
    ports:
      - 8000:80
